var CaasU;(()=>{"use strict";var e={d:(s,t)=>{for(var r in t)e.o(t,r)&&!e.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:t[r]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},s={};e.r(s),e.d(s,{CaasUserManagementClient:()=>t});class t{constructor(e){this.currentUser=null,this.currentProject=null,this.currentHub=null,this.demoMode=!1,this.useDirectFetch=!1,this.useStreaming=!0,this.serveraddress=e,this.sessionid=localStorage.getItem("CSUM-API-SESSIONID")}getSessionID(){return this.sessionid}getCurrentUser(){return this.currentUser}getCurrentHub(){return this.currentHub}getCurrentProject(){return this.currentProject}getUseDirectFetch(){return this.useDirectFetch}getUseStreaming(){return this.useStreaming}getDemoMode(){return this.demoMode}getUploadURL(){return this.serveraddress+"/caas_um_api/upload"}getUploadArrayURL(){return this.serveraddress+"/caas_um_api/uploadArray"}async getConfiguration(){let e=await fetch(this.serveraddress+"/caas_um_api/configuration",{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}}),s=await e.json();this.useDirectFetch=s.useDirectFetch,this.useStreaming=s.useStreaming,this.demoMode=s.demoMode}async checkLogin(){let e=await fetch(this.serveraddress+"/caas_um_api/checklogin",{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}}),s=await e.json();return!!s.succeeded&&(this.currentUser=s.user,s.hub?s.project?(this.currentHub=s.hub,this.currentProject=s.project):(this.currentHub=s.hub,this.currentProject=null):(this.currentProject=null,this.currentHub=null),!0)}async logout(){await fetch(this.serveraddress+"/caas_um_api/logout/",{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async register(e){let s=JSON.stringify({firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password}),t=await fetch(this.serveraddress+"/caas_um_api/register/",{body:s,credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"}});return t=await t.json(),t.ERROR?t.ERROR:"SUCCESS"}async login(e,s){let t=await fetch(this.serveraddress+"/caas_um_api/login/"+e+"/"+s,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"});return t=await t.json(),t.ERROR||(this.currentUser=t.user,this.sessionid=t.sessionid,localStorage.setItem("CSUM-API-SESSIONID",this.sessionid)),t}async leaveHub(){await fetch(this.serveraddress+"/caas_um_api/hub/none",{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"}),this.currentProject=null,this.currentHub=null}async getHubs(){let e=await fetch(this.serveraddress+"/caas_um_api/hubs",{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}});return await e.json()}async renameHub(e,s){await fetch(this.serveraddress+"/caas_um_api/renameHub/"+e+"/"+s,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async createHub(e){let s=await fetch(this.serveraddress+"/caas_um_api/newhub/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"});return await s.json()}async loadHub(e){let s=await fetch(this.serveraddress+"/caas_um_api/hub/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"}),t=await s.json();this.currentHub=t}async getHubUsers(e){let s=await fetch(this.serveraddress+"/caas_um_api/hubusers/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}});return await s.json()}async addHubUser(e,s,t){await fetch(this.serveraddress+"/caas_um_api/addHubUser/"+e+"/"+s+"/"+t,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async updateHubUser(e,s,t){await fetch(this.serveraddress+"/caas_um_api/updateHubUser/"+e+"/"+s+"/"+t,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async deleteHubUser(e,s){await fetch(this.serveraddress+"/caas_um_api/deleteHubUser/"+e+"/"+s,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async deleteHub(e){await fetch(this.serveraddress+"/caas_um_api/deleteHub/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async acceptHub(e,s){await fetch(this.serveraddress+"/caas_um_api/acceptHub/"+e+"/"+s,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"}),this.refreshHubTable()}async leaveProject(){await fetch(this.serveraddress+"/caas_um_api/project/none",{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"}),this.currentProject=null}async renameProject(e,s){await fetch(this.serveraddress+"/caas_um_api/renameproject/"+e+"/"+s,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async createProject(e,s){let t=await fetch(this.serveraddress+"/caas_um_api/newproject/"+e+"/"+s,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"});return await t.json()}async deleteProject(e){await fetch(this.serveraddress+"/caas_um_api/deleteproject/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async loadProject(e){let s=await fetch(this.serveraddress+"/caas_um_api/project/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"}),t=await s.json();this.currentProject=t}async getProjects(e){let s=await fetch(this.serveraddress+"/caas_um_api/projects/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}});return await s.json()}async getProjectUsers(e){let s=await fetch(this.serveraddress+"/caas_um_api/projectusers/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}});return await s.json()}async addProjectUser(e,s,t){await fetch(this.serveraddress+"/caas_um_api/addProjectUser/"+e+"/"+s+"/"+t,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async updateProjectUser(e,s,t){await fetch(this.serveraddress+"/caas_um_api/updateProjectUser/"+e+"/"+s+"/"+t,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async deleteProjectUser(e,s){await fetch(this.serveraddress+"/caas_um_api/deleteProjectUser/"+e+"/"+s,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async getUploadToken(e,s){let t=await fetch(this.serveraddress+"/caas_um_api/uploadToken/"+e+"/"+s,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}});return await t.json()}processUploadFromToken(e,s=""){fetch(this.serveraddress+"/caas_um_api/processToken/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT",headers:{startpath:s}})}async getModels(){let e=await fetch(this.serveraddress+"/caas_um_api/models",{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}});return await e.json()}async getDownloadToken(e,s){let t=await fetch(this.serveraddress+"/caas_um_api/downloadToken/"+e+"/"+s,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}});return await t.json()}async getPNG(e){return await fetch(this.serveraddress+"/caas_um_api/png/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}})}async getSCS(e){let s=await fetch(this.serveraddress+"/caas_um_api/scs/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}}),t=await s.arrayBuffer();return new Uint8Array(t)}async enableStreamAccess(e){await fetch(this.serveraddress+"/caas_um_api/enableStreamAccess/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async deleteModel(e){await fetch(this.serveraddress+"/caas_um_api/deleteModel/"+e,{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid},method:"PUT"})}async initializeWebviewer(e){let s;if(this.useStreaming){let t=await fetch(this.serveraddress+"/caas_um_api/streamingSession",{credentials:"include",mode:"cors",headers:{"CSUM-API-SESSIONID":this.sessionid}}),r=await t.json();s=new Communicator.WebViewer({containerId:e,endpointUri:"ws://"+r.serverurl+":"+r.port+"?token="+r.sessionid,model:"_empty",rendererType:Communicator.RendererType.Client})}else s=new Communicator.WebViewer({containerId:e,empty:!0,streamingMode:1});return s}}CaasU=s})();